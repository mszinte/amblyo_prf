"""-----------------------------------------------------------------------------------------pdf_maps.py-----------------------------------------------------------------------------------------Goal of the script:Create flatmap plots and dataset-----------------------------------------------------------------------------------------Input(s):sys.argv[1]: main project directorysys.argv[2]: project name (correspond to directory)sys.argv[3]: subject number-----------------------------------------------------------------------------------------Output(s):pdf files with pycortex maps-----------------------------------------------------------------------------------------To run:0. To Run on meso (not on node)1. cd to function>> cd ~/disks/meso_H/projects/stereo_prf/analysis_code/postproc/prf/postfit/2. run python command>> python pyxcortex_maps.py [main directory] [project name] [subject number]-----------------------------------------------------------------------------------------Exemple:python pdf_maps.py ~/disks/meso_shared amblyo_prf 18-----------------------------------------------------------------------------------------Written by Martin Szinte (mail@martinszinte.net)-----------------------------------------------------------------------------------------"""import sysfrom pypdf import PdfMergerimport os# Inputsmain_dir = sys.argv[1]project_dir = sys.argv[2]n_subjects = (int(sys.argv[3])+1)# main_dir = "/Users/uriel/disks/meso_shared"# project_dir = "amblyo_prf"# n_subjects = (18+1)#ECC pdfmerger = PdfMerger()num = []for t in range(1, n_subjects):    num.append(str(t).zfill(2))pdf_list = [f'sub-{n}_task-prf_ecc_avg.pdf' for n in num]for p, pdf in zip(num, pdf_list):    directory = '{main_dir}/{project_dir}/derivatives/pp_data/sub-{num}/prf/pycortex/flatmaps'.format(main_dir=main_dir,project_dir=project_dir,num=p)     os.chdir(directory)    merger.append(pdf)os.chdir('{main_dir}/{project_dir}/derivatives/pp_data'.format(main_dir=main_dir,project_dir=project_dir))merger.write("ECC_all.pdf")merger.close()#polar pdfmerger = PdfMerger()num = []for t in range(1, n_subjects):    num.append(str(t).zfill(2))pdf_list = [f'sub-{n}_task-prf_polar_255_avg.pdf' for n in num]for p, pdf in zip(num, pdf_list):    directory = f'{main_dir}/{project_dir}/derivatives/pp_data/sub-{p}/prf/pycortex/flatmaps'    os.chdir(directory)    merger.append(pdf)os.chdir('{main_dir}/{project_dir}/derivatives/pp_data'.format(main_dir=main_dir,project_dir=project_dir))merger.write("Polar_all.pdf")merger.close()#rsq mapmerger = PdfMerger()num = []for t in range(1, n_subjects):    num.append(str(t).zfill(2))pdf_list = [f'sub-{n}_task-prf_rsq_avg.pdf' for n in num]for p, pdf in zip(num, pdf_list):    directory = f'{main_dir}/{project_dir}/derivatives/pp_data/sub-{p}/prf/pycortex/flatmaps'    os.chdir(directory)    merger.append(pdf)os.chdir('{main_dir}/{project_dir}/derivatives/pp_data'.format(main_dir=main_dir,project_dir=project_dir))merger.write("rsq_all.pdf")merger.close()#size mapmerger = PdfMerger()num = []for t in range(1, n_subjects):    num.append(str(t).zfill(2))pdf_list = [f'sub-{n}_task-prf_size_avg.pdf' for n in num]for p, pdf in zip(num, pdf_list):    directory = f'{main_dir}/{project_dir}/derivatives/pp_data/sub-{p}/prf/pycortex/flatmaps'    os.chdir(directory)    merger.append(pdf)os.chdir('{main_dir}/{project_dir}/derivatives/pp_data'.format(main_dir=main_dir,project_dir=project_dir))merger.write("Size_all.pdf")merger.close()# ### brouillon# reader = PdfReader('{directory}/{pdf_name}'.format(directory=directory,pdf_name=pdf))# writer = PdfWriter()# page = reader.pages[0]# writer.add_page(page)# annotation = AnnotationBuilder.free_text("sub-{num}".format(num=p),# rect = (50,550,200,650),# font="Arial",# bold=True,# italic=True,# font_size="20pt",# border_color="0000ff",# background_color="cdcdcd",# font_color = "001400")# writer.add_annotation(page_number=0,annotation=annotation) 